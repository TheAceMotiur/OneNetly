# ─────────────────────────────────────────────────────────────────────────────
# Laravel Herd – additional Nginx config for OneFiles
#
# HOW TO INSTALL (Windows Herd):
#   Copy this file to:
#   C:\Users\<YourUser>\.config\herd\config\nginx\onefiles.test.conf
#   Then restart Herd (tray icon → Restart Services).
#
# HOW TO INSTALL (macOS Herd):
#   Copy this file to:
#   ~/Library/Application Support/Herd/config/nginx/onefiles.test.conf
#   Then restart Herd.
# ─────────────────────────────────────────────────────────────────────────────

# Block direct web access to the database folder (SQL migration files)
location ^~ /database/ {
    deny all;
    return 403;
}

# Block direct access to config and drive_api PHP files
location ~* ^/(config|drive_api)\.php$ {
    deny all;
    return 403;
}

# Increase Nginx client body size limit for large file uploads (5 GB)
client_max_body_size 5200M;

# Increase all timeouts to 2 hours for very large file uploads
proxy_read_timeout    7200;
proxy_connect_timeout 7200;
proxy_send_timeout    7200;
fastcgi_read_timeout  7200;
fastcgi_send_timeout  7200;
fastcgi_connect_timeout 7200;
